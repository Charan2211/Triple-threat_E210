<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advertising Manager - AI Business Assistant</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
        }
        .sidebar {
            min-height: 100vh;
            background: linear-gradient(180deg, var(--primary-color), var(--secondary-color));
            color: white;
        }
        .campaign-card {
            border-left: 4px solid;
            transition: transform 0.2s;
            margin-bottom: 15px;
        }
        .campaign-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .platform-facebook { border-color: #1877F2; }
        .platform-instagram { border-color: #E4405F; }
        .platform-google { border-color: #4285F4; }
        .platform-linkedin { border-color: #0A66C2; }
        .platform-twitter { border-color: #1DA1F2; }
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        .status-active { background: #d1fae5; color: #065f46; }
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-completed { background: #dbeafe; color: #1e40af; }
        .status-paused { background: #f3f4f6; color: #374151; }
        .ai-suggestion {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-left: 4px solid #0ea5e9;
            border-radius: 0 8px 8px 0;
        }
        .budget-progress {
            height: 8px;
            border-radius: 4px;
        }
        .performance-badge {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 10px;
        }
        .performance-good { background: #dcfce7; color: #166534; }
        .performance-average { background: #fef3c7; color: #92400e; }
        .performance-poor { background: #fee2e2; color: #991b1b; }
        .nav-tabs .nav-link.active {
            border-bottom: 3px solid var(--primary-color);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2 col-lg-2 d-md-block sidebar collapse p-0">
                <div class="position-sticky pt-3">
                    <div class="text-center p-4">
                        <h4><i class="fas fa-robot me-2"></i>AI Business Assistant</h4>
                        <small class="text-light">Small Business Platform</small>
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="vendor-dashboard.html">
                                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#">
                                <i class="fas fa-bullhorn me-2"></i>Advertising
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="content-studio.html">
                                <i class="fas fa-pencil-alt me-2"></i>Content Studio
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="fundraising-hub.html">
                                <i class="fas fa-hand-holding-usd me-2"></i>Fundraising
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="collaboration-board.html">
                                <i class="fas fa-handshake me-2"></i>Collaboration
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="ai-assistant.html">
                                <i class="fas fa-robot me-2"></i>AI Assistant
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-chart-line me-2"></i>Analytics
                            </a>
                        </li>
                    </ul>
                    
                    <div class="mt-5 p-3">
                        <div class="card bg-dark text-white">
                            <div class="card-body">
                                <h6><i class="fas fa-lightbulb me-2"></i>Ad Tip</h6>
                                <small id="ad-tip">Use A/B testing to find the best performing ad creative.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-10 col-lg-10 ms-sm-auto px-4 py-4">
                <!-- Header -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2><i class="fas fa-bullhorn me-2"></i>Advertising Manager</h2>
                        <p class="text-muted">Create, manage, and optimize your ad campaigns</p>
                    </div>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createCampaignModal">
                        <i class="fas fa-plus me-2"></i>New Campaign
                    </button>
                </div>

                <!-- Campaign Stats -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h6 class="text-muted">Active Campaigns</h6>
                                <h3 id="active-count">0</h3>
                                <small class="text-success" id="active-change">â†‘ 0% from last month</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h6 class="text-muted">Total Spent</h6>
                                <h3 id="total-spent">$0</h3>
                                <small class="text-muted" id="budget-remaining">$0 budget remaining</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h6 class="text-muted">Avg. ROI</h6>
                                <h3 id="avg-roi">0x</h3>
                                <small class="text-success" id="roi-trend">Loading...</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h6 class="text-muted">AI Suggestions</h6>
                                <h3 id="ai-suggestions-count">0</h3>
                                <small><a href="#" onclick="showAllSuggestions()">View all</a></small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Optimization Suggestions -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card ai-suggestion">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="fas fa-robot me-2"></i>AI Optimization Suggestions</h5>
                                        <p class="mb-0" id="ai-optimization-text">Loading suggestions...</p>
                                    </div>
                                    <div>
                                        <button class="btn btn-outline-primary btn-sm me-2" onclick="loadAIOptimizations()">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button class="btn btn-primary btn-sm" onclick="applyAllOptimizations()">
                                            <i class="fas fa-magic"></i> Apply All
                                        </button>
                                    </div>
                                </div>
                                <div class="mt-3" id="optimization-list">
                                    <!-- Optimizations will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabs for Campaign Management -->
                <ul class="nav nav-tabs mb-4" id="campaignTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="active-tab" data-bs-toggle="tab" data-bs-target="#active" type="button">
                            Active <span class="badge bg-primary" id="active-badge">0</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending" type="button">
                            Pending <span class="badge bg-warning" id="pending-badge">0</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="completed-tab" data-bs-toggle="tab" data-bs-target="#completed" type="button">
                            Completed <span class="badge bg-success" id="completed-badge">0</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="all-tab" data-bs-toggle="tab" data-bs-target="#all" type="button">
                            All Campaigns
                        </button>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content" id="campaignTabsContent">
                    <!-- Active Campaigns -->
                    <div class="tab-pane fade show active" id="active" role="tabpanel">
                        <div class="row" id="active-campaigns-list">
                            <!-- Active campaigns will be loaded here -->
                            <div class="col-12 text-center py-5">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="mt-2">Loading active campaigns...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Pending Campaigns -->
                    <div class="tab-pane fade" id="pending" role="tabpanel">
                        <div class="row" id="pending-campaigns-list">
                            <!-- Pending campaigns will be loaded here -->
                        </div>
                    </div>

                    <!-- Completed Campaigns -->
                    <div class="tab-pane fade" id="completed" role="tabpanel">
                        <div class="row" id="completed-campaigns-list">
                            <!-- Completed campaigns will be loaded here -->
                        </div>
                    </div>

                    <!-- All Campaigns -->
                    <div class="tab-pane fade" id="all" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover" id="all-campaigns-table">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Platform</th>
                                                <th>Status</th>
                                                <th>Budget</th>
                                                <th>Performance</th>
                                                <th>Start Date</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- All campaigns will be loaded here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Chart -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>Campaign Performance</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="performanceChart" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Create Campaign Modal -->
    <div class="modal fade" id="createCampaignModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-plus-circle me-2"></i>Create New Campaign</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="campaignForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Campaign Name *</label>
                                <input type="text" class="form-control" id="campaignName" required placeholder="e.g., Summer Sale 2024">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Platform *</label>
                                <select class="form-select" id="platform" required>
                                    <option value="">Select platform</option>
                                    <option value="facebook">Facebook</option>
                                    <option value="instagram">Instagram</option>
                                    <option value="google">Google Ads</option>
                                    <option value="linkedin">LinkedIn</option>
                                    <option value="twitter">Twitter</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Budget ($) *</label>
                                <input type="number" class="form-control" id="budget" min="50" step="10" required placeholder="500">
                                <small class="text-muted">Minimum $50 recommended</small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Daily Budget ($)</label>
                                <input type="number" class="form-control" id="dailyBudget" min="10" step="5" placeholder="Auto-calculated">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Start Date *</label>
                                <input type="date" class="form-control" id="startDate" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">End Date</label>
                                <input type="date" class="form-control" id="endDate">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Target Audience</label>
                            <textarea class="form-control" id="targetAudience" rows="3" placeholder="Describe your target audience (age, interests, location)..."></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Ad Copy</label>
                            <textarea class="form-control" id="adCopy" rows="4" placeholder="Enter your ad text..."></textarea>
                            <div class="mt-2">
                                <button type="button" class="btn btn-outline-primary btn-sm" onclick="generateAICopy()">
                                    <i class="fas fa-robot me-1"></i>Generate with AI
                                </button>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Keywords (comma separated)</label>
                            <input type="text" class="form-control" id="keywords" placeholder="e.g., business, marketing, sales">
                        </div>
                    </form>
                    
                    <!-- AI Prediction -->
                    <div class="card mt-3 d-none" id="aiPredictionCard">
                        <div class="card-body">
                            <h6><i class="fas fa-chart-line me-2"></i>AI Performance Prediction</h6>
                            <div class="row">
                                <div class="col-md-3">
                                    <small class="text-muted">Estimated Impressions</small>
                                    <h5 id="predicted-impressions">0</h5>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Estimated Clicks</small>
                                    <h5 id="predicted-clicks">0</h5>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Estimated Cost/Click</small>
                                    <h5 id="predicted-cpc">$0</h5>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Estimated ROI</small>
                                    <h5 id="predicted-roi">0x</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-outline-primary" onclick="predictCampaignPerformance()">
                        <i class="fas fa-magic me-1"></i>Predict Performance
                    </button>
                    <button type="button" class="btn btn-primary" onclick="submitCampaign()">Create Campaign</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Campaign Modal -->
    <div class="modal fade" id="editCampaignModal" tabindex="-1">
        <!-- Similar to create modal but for editing -->
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Global variables
        let currentVendorId = 1;
        let performanceChart;
        let campaigns = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadCampaigns();
            loadAIOptimizations();
            initializeChart();
            updateStats();
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            const nextWeek = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            document.getElementById('startDate').value = today;
            document.getElementById('endDate').value = nextWeek;
            
            // Auto-calculate daily budget
            document.getElementById('budget').addEventListener('input', calculateDailyBudget);
            document.getElementById('startDate').addEventListener('change', calculateDailyBudget);
            document.getElementById('endDate').addEventListener('change', calculateDailyBudget);
            
            // Update ad tips
            updateAdTips();
        });

        // Load all campaigns
        async function loadCampaigns() {
            try {
                // In production, fetch from API
                // For now, simulate data
                campaigns = await simulateCampaignData();
                renderCampaigns();
                updateStats();
            } catch (error) {
                console.error('Error loading campaigns:', error);
            }
        }

        // Simulate campaign data (replace with API call)
        async function simulateCampaignData() {
            return [
                {
                    id: 1,
                    name: "Summer Sale 2024",
                    platform: "facebook",
                    status: "active",
                    budget: 1000,
                    spent: 450,
                    startDate: "2024-01-15",
                    endDate: "2024-02-15",
                    performance: { roi: 2.5, impressions: 15000, clicks: 300 }
                },
                {
                    id: 2,
                    name: "Product Launch",
                    platform: "instagram",
                    status: "active",
                    budget: 800,
                    spent: 200,
                    startDate: "2024-01-20",
                    endDate: "2024-02-20",
                    performance: { roi: 1.8, impressions: 8000, clicks: 150 }
                }
            ];
        }

        // Render campaigns in tabs
        function renderCampaigns() {
            renderActiveCampaigns();
            renderPendingCampaigns();
            renderCompletedCampaigns();
            renderAllCampaignsTable();
        }

        // Render active campaigns
        function renderActiveCampaigns() {
            const container = document.getElementById('active-campaigns-list');
            const activeCampaigns = campaigns.filter(c => c.status === 'active');
            
            if (activeCampaigns.length === 0) {
                container.innerHTML = `
                    <div class="col-12 text-center py-5">
                        <i class="fas fa-bullhorn fa-3x text-muted mb-3"></i>
                        <h5>No Active Campaigns</h5>
                        <p class="text-muted">Create your first campaign to get started</p>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createCampaignModal">
                            <i class="fas fa-plus me-2"></i>Create Campaign
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '';
            activeCampaigns.forEach(campaign => {
                const platformClass = `platform-${campaign.platform}`;
                const progress = (campaign.spent / campaign.budget) * 100;
                
                html += `
                    <div class="col-md-6 col-lg-4">
                        <div class="card campaign-card ${platformClass}">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <h5 class="card-title mb-0">${campaign.name}</h5>
                                    <span class="status-badge status-active">Active</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fab fa-${campaign.platform} me-2" style="color: ${getPlatformColor(campaign.platform)}"></i>
                                    <span class="text-uppercase">${campaign.platform}</span>
                                    <small class="text-muted ms-2">${campaign.startDate} to ${campaign.endDate}</small>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <small class="text-muted">Budget: $${campaign.budget}</small>
                                        <small class="text-muted">Spent: $${campaign.spent}</small>
                                    </div>
                                    <div class="progress budget-progress">
                                        <div class="progress-bar" style="width: ${progress}%"></div>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-6">
                                        <small class="text-muted">ROI</small>
                                        <h6 class="mb-0">${campaign.performance.roi}x</h6>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Impressions</small>
                                        <h6 class="mb-0">${campaign.performance.impressions.toLocaleString()}</h6>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <button class="btn btn-sm btn-outline-primary" onclick="editCampaign(${campaign.id})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="pauseCampaign(${campaign.id})">
                                        <i class="fas fa-pause"></i> Pause
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Render pending campaigns
        function renderPendingCampaigns() {
            const container = document.getElementById('pending-campaigns-list');
            // Similar to renderActiveCampaigns but for pending status
        }

        // Render completed campaigns
        function renderCompletedCampaigns() {
            const container = document.getElementById('completed-campaigns-list');
            // Similar to renderActiveCampaigns but for completed status
        }

        // Render all campaigns table
        function renderAllCampaignsTable() {
            const tbody = document.querySelector('#all-campaigns-table tbody');
            let html = '';
            
            campaigns.forEach(campaign => {
                const performanceClass = getPerformanceClass(campaign.performance.roi);
                
                html += `
                    <tr>
                        <td>
                            <div class="d-flex align-items-center">
                                <i class="fab fa-${campaign.platform} me-2" style="color: ${getPlatformColor(campaign.platform)}"></i>
                                ${campaign.name}
                            </div>
                        </td>
                        <td><span class="text-uppercase">${campaign.platform}</span></td>
                        <td><span class="status-badge status-${campaign.status}">${campaign.status}</span></td>
                        <td>$${campaign.budget}</td>
                        <td>
                            <span class="performance-badge ${performanceClass}">
                                ${campaign.performance.roi}x ROI
                            </span>
                        </td>
                        <td>${campaign.startDate}</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="editCampaign(${campaign.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteCampaign(${campaign.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }

        // Update statistics
        function updateStats() {
            const activeCount = campaigns.filter(c => c.status === 'active').length;
            const totalSpent = campaigns.reduce((sum, c) => sum + c.spent, 0);
            const avgROI = campaigns.length > 0 ? 
                campaigns.reduce((sum, c) => sum + c.performance.roi, 0) / campaigns.length : 0;
            
            document.getElementById('active-count').textContent = activeCount;
            document.getElementById('total-spent').textContent = '$' + totalSpent;
            document.getElementById('avg-roi').textContent = avgROI.toFixed(1) + 'x';
            
            // Update badges
            document.getElementById('active-badge').textContent = activeCount;
        }

        // Load AI optimizations
        async function loadAIOptimizations() {
            try {
                // In production, fetch from API
                const optimizations = [
                    {
                        description: "Increase Facebook campaign budget by 20% for better reach",
                        impact: "High",
                        action: "increase_budget"
                    },
                    {
                        description: "Add more specific keywords to Google Ads campaign",
                        impact: "Medium",
                        action: "optimize_keywords"
                    },
                    {
                        description: "Test different ad creatives on Instagram",
                        impact: "Medium",
                        action: "test_creatives"
                    }
                ];
                
                const container = document.getElementById('optimization-list');
                let html = '';
                
                optimizations.forEach(opt => {
                    html += `
                        <div class="d-flex justify-content-between align-items-center mb-2 p-2 border-bottom">
                            <div>
                                <strong>${opt.description}</strong>
                                <br>
                                <small class="text-muted">Impact: ${opt.impact}</small>
                            </div>
                            <button class="btn btn-sm btn-primary" onclick="applyOptimization('${opt.action}')">
                                Apply
                            </button>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
                document.getElementById('ai-optimization-text').textContent = `${optimizations.length} optimizations available`;
                document.getElementById('ai-suggestions-count').textContent = optimizations.length;
                
            } catch (error) {
                console.error('Error loading AI optimizations:', error);
            }
        }

        // Initialize performance chart
        function initializeChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            performanceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Impressions',
                        data: [12000, 19000, 15000, 25000, 22000, 30000],
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y'
                    }, {
                        label: 'Clicks',
                        data: [240, 380, 300, 500, 440, 600],
                        borderColor: '#4cc9f0',
                        backgroundColor: 'rgba(76, 201, 240, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Impressions'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Clicks'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    }
                }
            });
        }

        // Submit new campaign
        async function submitCampaign() {
            const form = document.getElementById('campaignForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const campaignData = {
                name: document.getElementById('campaignName').value,
                platform: document.getElementById('platform').value,
                budget: parseFloat(document.getElementById('budget').value),
                dailyBudget: parseFloat(document.getElementById('dailyBudget').value) || undefined,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                targetAudience: document.getElementById('targetAudience').value,
                adCopy: document.getElementById('adCopy').value,
                keywords: document.getElementById('keywords').value.split(',').map(k => k.trim())
            };
            
            try {
                // In production, POST to API
                console.log('Creating campaign:', campaignData);
                
                // Add to local array
                campaigns.push({
                    id: campaigns.length + 1,
                    ...campaignData,
                    status: 'pending',
                    spent: 0,
                    performance: { roi: 1.0, impressions: 0, clicks: 0 }
                });
                
                // Reset form
                form.reset();
                
                // Close modal
                bootstrap.Modal.getInstance(document.getElementById('createCampaignModal')).hide();
                
                // Reload campaigns
                loadCampaigns();
                
                alert('Campaign created successfully!');
                
            } catch (error) {
                console.error('Error creating campaign:', error);
                alert('Failed to create campaign');
            }
        }

        // Generate AI ad copy
        async function generateAICopy() {
            const product = prompt('Describe your product/service:');
            if (!product) return;
            
            try {
                // In production, call AI API
                const aiCopy = `Discover amazing ${product}! Limited time offer. Shop now and save! Perfect solution for your needs. #${product.replace(/\s+/g, '')} #business`;
                
                document.getElementById('adCopy').value = aiCopy;
                alert('AI-generated copy added!');
            } catch (error) {
                console.error('Error generating AI copy:', error);
                alert('Failed to generate AI copy');
            }
        }

        // Predict campaign performance
        function predictCampaignPerformance() {
            const budget = parseFloat(document.getElementById('budget').value) || 0;
            const platform = document.getElementById('platform').value;
            
            if (!budget || !platform) {
                alert('Please enter budget and select platform first');
                return;
            }
            
            // Simple prediction logic
            const predictions = {
                impressions: Math.round(budget * 1000),
                clicks: Math.round(budget * 20),
                cpc: (budget / 20).toFixed(2),
                roi: (Math.random() * 2 + 1).toFixed(1)
            };
            
            document.getElementById('predicted-impressions').textContent = predictions.impressions.toLocaleString();
            document.getElementById('predicted-clicks').textContent = predictions.clicks.toLocaleString();
            document.getElementById('predicted-cpc').textContent = '$' + predictions.cpc;
            document.getElementById('predicted-roi').textContent = predictions.roi + 'x';
            
            document.getElementById('aiPredictionCard').classList.remove('d-none');
        }

        // Calculate daily budget
        function calculateDailyBudget() {
            const budget = parseFloat(document.getElementById('budget').value) || 0;
            const startDate = new Date(document.getElementById('startDate').value);
            const endDate = new Date(document.getElementById('endDate').value);
            
            if (budget && startDate && endDate) {
                const days = Math.max(1, Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)));
                const dailyBudget = Math.round((budget / days) * 100) / 100;
                document.getElementById('dailyBudget').value = dailyBudget;
            }
        }

        // Helper functions
        function getPlatformColor(platform) {
            const colors = {
                facebook: '#1877F2',
                instagram: '#E4405F',
                google: '#4285F4',
                linkedin: '#0A66C2',
                twitter: '#1DA1F2'
            };
            return colors[platform] || '#666';
        }

        function getPerformanceClass(roi) {
            if (roi >= 2) return 'performance-good';
            if (roi >= 1) return 'performance-average';
            return 'performance-poor';
        }

        function updateAdTips() {
            const tips = [
                "Test different ad creatives to find what works best",
                "Target specific audiences for better conversion rates",
                "Use retargeting to reach previous visitors",
                "Schedule ads for when your audience is most active",
                "Monitor competitors' ads for inspiration"
            ];
            
            setInterval(() => {
                const randomTip = tips[Math.floor(Math.random() * tips.length)];
                document.getElementById('ad-tip').textContent = randomTip;
            }, 10000);
        }

        // Placeholder functions for actions
        function editCampaign(id) {
            alert(`Edit campaign ${id} - This would open edit modal`);
        }

        function pauseCampaign(id) {
            if (confirm('Are you sure you want to pause this campaign?')) {
                alert(`Campaign ${id} paused`);
                // Update status and reload
            }
        }

        function deleteCampaign(id) {
            if (confirm('Are you sure you want to delete this campaign?')) {
                alert(`Campaign ${id} deleted`);
                // Remove from array and reload
            }
        }

        function applyOptimization(action) {
            alert(`Applying optimization: ${action}`);
            // Implement optimization logic
        }

        function applyAllOptimizations() {
            if (confirm('Apply all AI optimizations?')) {
                alert('All optimizations applied successfully!');
                // Implement batch optimization
            }
        }

        function showAllSuggestions() {
            alert('Showing all AI suggestions');
            // Navigate to suggestions page or expand section
        }
    </script>
</body>
</html>